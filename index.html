<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Qaraqalpaq_sÃ³zlik - Interaktiv</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <script src="https://cdn.tailwindcss.com"></script>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { font-family: 'Roboto', sans-serif; }
    * { transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease; }
  </style>
</head>

<body class="bg-slate-50 text-slate-800">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    const STORAGE_KEYS = {
      theme: "qs_theme",
      lang: "qs_lang",
      chat: "qs_chat_v1"
    };

    const LANGS = [
      { code: "uz", label: "Oâ€˜zbek" },
      { code: "kaa", label: "Qaraqalpaq" },
      { code: "ru", label: "Ð ÑƒÑÑÐºÐ¸Ð¹" },
    ];

    const i18n = {
      uz: {
        brand: "Qaraqalpaq Soâ€˜zlik",
        heroTitle: "Qaraqalpaq_sÃ³zlik â€” Interaktiv Soâ€˜zlik",
        heroSubtitle: "Soâ€˜z maâ€™nolari, misollar va audio talaffuz â€” barchasi bir joyda.",
        navNews: "Yangiliklar",
        navFeedback: "Fikr va taklif",
        navRegister: "Roâ€˜yxatdan oâ€˜tish",
        navTeam: "Jamoa",
        quickTitle: "Boâ€˜limlar",
        cardDictTitle: "ðŸ“• Soâ€˜zliklar",
        cardDictDesc: "Bu boâ€˜limda soâ€˜zlarning toâ€˜liq izohi, misollar bilan qoâ€˜llanishi keltiriladi. Oâ€˜quvchi, talaba va tilshunoslar uchun foydali.",
        cardAudioTitle: "ðŸ”Š Audio",
        cardAudioDesc: "Soâ€˜zlarning talaffuzini tinglang, oâ€˜rganing va amalda qoâ€˜llang.",
        cardOpen: "Kirish",
        socialTitle: "Biz bilan bogâ€˜laning",
        aboutTitle: "ðŸ“Œ Sayt haqida",
        aboutText:
          "â€œQaraqalpaq_sÃ³zligiâ€ â€” qaraqalpoq tilining soâ€˜z boyligini jamlagan zamonaviy izohli platforma. Bu yerda soâ€˜z maâ€™nosi, qoâ€˜llanilishi va hayotiy misollar bilan tanishasiz. Maqsad â€” tilni sevish, oâ€˜rganish va asrash.",
        rememberTitle: "ðŸ“– Esda saqlang!",
        q1: "â€œNiyatingiz chin boâ€˜lsa, maqsadingizga yetasiz!â€",
        q2: "â€œHarakat albatta natijasini beradi.â€",
        q3: "â€œIlm â€” bu NUR!â€",
        author: "â€“ Koâ€˜shkinbaev Atabek",
        contactTitle: "ðŸ“¬ Savolingiz bormi?",
        founder: "Loyiha asoschisi & Frontend dasturchi",
        founderName: "Koâ€˜shkinbaev Atabek",
        tech: "Backend dasturchi & Texnik xodim",
        techName: "Oâ€˜tebaev Abdirasul",
        rights: "Barcha huquqlar himoyalangan.",
        themeDay: "Kunduz",
        themeNight: "Tungi",
        searchPlaceholder: "Soâ€˜z qidiring (demo)...",
        toastSaved: "Sozlamalar saqlandi âœ…",
        aiBtn: "AI Yordamchi",
        aiTitle: "Gemini AI â€” Savol-javob",
        aiHint: "Savolingizni yozing. AI avtomatik javob beradi.",
        aiPlaceholder: "Masalan: 'Imidj nima?' yoki 'Soâ€˜zlikdan qanday foydalanaman?'",
        aiSend: "Yuborish",
        aiClear: "Chatni tozalash",
        aiThinking: "Oâ€˜ylayapman...",
        aiErr: "Xatolik. Server ishlayaptimi? (server.js 3000-port)"
      },
      kaa: {
        brand: "Qaraqalpaq SÃ³zlik",
        heroTitle: "Qaraqalpaq_sÃ³zlik â€” Interaktiv SÃ³zlik",
        heroSubtitle: "SÃ³z mÃ¡nileri, mÄ±sallar hÃ¡m audio talaffuz â€” bÃ¡ri bir jerde.",
        navNews: "JaÅ„alÄ±qlar",
        navFeedback: "Pikir hÃ¡m usÄ±nÄ±s",
        navRegister: "Dizimnen Ã³tiw",
        navTeam: "Komanda",
        quickTitle: "BÃ³limler",
        cardDictTitle: "ðŸ“• SÃ³zlikler",
        cardDictDesc: "Bul bÃ³limde hÃ¡rbir sÃ³zdiÅ„ tolÄ±q tÃºsindirmesi, mÄ±sallar menen qollanÄ±lÄ±wÄ± beriledi. OqÄ±wshÄ±lar, studentler hÃ¡m tilshiler ushÄ±n paydalÄ±.",
        cardAudioTitle: "ðŸ”Š Audio",
        cardAudioDesc: "SÃ³zlerdiÅ„ talaffuzÄ±n tÄ±Å„laÅ„, ÃºyreniÅ„ hÃ¡m Ã¡melde qollanÄ±Å„.",
        cardOpen: "Kiriw",
        socialTitle: "Biz benen baylanÄ±sÄ±Å„",
        aboutTitle: "ðŸ“Œ Sayt haqqÄ±nda",
        aboutText:
          "â€œQaraqalpaq_sÃ³zligiâ€ â€” qaraqalpaq tiliniÅ„ sÃ³z baylÄ±ÇµÄ±n jÃ¡mlegen zamanagÃ³y tÃºsindirme platforma. Bul jerde sÃ³z mÃ¡nisi, qollanÄ±lÄ±wÄ± hÃ¡m turmÄ±slÄ±q mÄ±sallar menen tanÄ±sasÄ±z. Maqsat â€” tilimizdi qÃ¡dirlew, Ãºyreniw hÃ¡m saqlaw.",
        rememberTitle: "ðŸ“– Este saqlaÅ„!",
        q1: "â€œNiyetiÅ„ shÄ±n bolsa maqsetiÅ„e jeteseÅ„!â€",
        q2: "â€œHÃ¡reket Ã¡lbette nÃ¡tiyjesin beredi.â€",
        q3: "â€œIlim â€” bul NUR!â€",
        author: "â€“ KÃ³shkinbaev Atabek",
        contactTitle: "ðŸ“¬ SorawÄ±Å„Ä±z bar ma?",
        founder: "Joybar tiykarshÄ±sÄ± & Frontend programmist",
        founderName: "KÃ³shkinbaev Atabek",
        tech: "Backend programmist & Texnik xizmetker",
        techName: "Ã“tebaev Abdirasul",
        rights: "BarlÄ±q huqÄ±qlar qorÇµalÇµan.",
        themeDay: "KÃºndiz",
        themeNight: "TÃºngi",
        searchPlaceholder: "SÃ³z izlew (demo)...",
        toastSaved: "Sazlawlar saqlandÄ± âœ…",
        aiBtn: "AI JÃ¡rdemshi",
        aiTitle: "Gemini AI â€” Soraw-juwap",
        aiHint: "SorawÄ±Å„Ä±zdÄ± jazÄ±Å„. AI avtomatik juwap beredi.",
        aiPlaceholder: "MÄ±sal: 'Imidj ne?' yaki 'SÃ³zlikten qalay paydalanaman?'",
        aiSend: "Jiberiw",
        aiClear: "ChattÄ± tazalaw",
        aiThinking: "Oylap atÄ±rman...",
        aiErr: "QÃ¡telik. Server islep turÄ±ptÄ± ma? (server.js 3000-port)"
      },
      ru: {
        brand: "Qaraqalpaq Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ",
        heroTitle: "Qaraqalpaq_sÃ³zlik â€” Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ",
        heroSubtitle: "Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ ÑÐ»Ð¾Ð², Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ Ð°ÑƒÐ´Ð¸Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð½Ð¾ÑˆÐµÐ½Ð¸Ðµ â€” Ð²ÑÑ‘ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¼ÐµÑÑ‚Ðµ.",
        navNews: "ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸",
        navFeedback: "ÐžÑ‚Ð·Ñ‹Ð²Ñ‹ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ",
        navRegister: "Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ",
        navTeam: "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°",
        quickTitle: "Ð Ð°Ð·Ð´ÐµÐ»Ñ‹",
        cardDictTitle: "ðŸ“• Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ",
        cardDictDesc: "Ð’ ÑÑ‚Ð¾Ð¼ Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ Ð²Ñ‹ Ð½Ð°Ð¹Ð´Ñ‘Ñ‚Ðµ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸Ñ ÑÐ»Ð¾Ð² Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ ÑƒÐ¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ñ. ÐŸÐ¾Ð»ÐµÐ·Ð½Ð¾ Ð´Ð»Ñ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð² Ð¸ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.",
        cardAudioTitle: "ðŸ”Š ÐÑƒÐ´Ð¸Ð¾",
        cardAudioDesc: "Ð¡Ð»ÑƒÑˆÐ°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð¸Ð·Ð½Ð¾ÑˆÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ð², ÑƒÑ‡Ð¸Ñ‚Ðµ Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐ¹Ñ‚Ðµ Ð½Ð° Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐµ.",
        cardOpen: "ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ",
        socialTitle: "Ð¡Ð²ÑÐ·Ð°Ñ‚ÑŒÑÑ Ñ Ð½Ð°Ð¼Ð¸",
        aboutTitle: "ðŸ“Œ Ðž ÑÐ°Ð¹Ñ‚Ðµ",
        aboutText:
          "â€œQaraqalpaq_sÃ³zligiâ€ â€” ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°, ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽÑ‰Ð°Ñ Ð±Ð¾Ð³Ð°Ñ‚ÑÑ‚Ð²Ð¾ ÐºÐ°Ñ€Ð°ÐºÐ°Ð»Ð¿Ð°ÐºÑÐºÐ¾Ð³Ð¾ ÑÐ·Ñ‹ÐºÐ°. Ð—Ð´ÐµÑÑŒ Ð²Ñ‹ Ð¸Ð·ÑƒÑ‡Ð¸Ñ‚Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ð², ÑƒÐ¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ðµ Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹. Ð¦ÐµÐ»ÑŒ â€” Ð»ÑŽÐ±Ð¸Ñ‚ÑŒ, Ð¸Ð·ÑƒÑ‡Ð°Ñ‚ÑŒ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ‚ÑŒ ÑÐ·Ñ‹Ðº.",
        rememberTitle: "ðŸ“– Ð—Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚Ðµ!",
        q1: "Â«Ð•ÑÐ»Ð¸ Ð½Ð°Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ Ð¸ÑÐºÑ€ÐµÐ½Ð½ÐµÐµ â€” Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÐµÑˆÑŒ Ñ†ÐµÐ»Ð¸!Â»",
        q2: "Â«Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð´Ð°ÑÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚.Â»",
        q3: "Â«Ð—Ð½Ð°Ð½Ð¸Ðµ â€” ÑÑ‚Ð¾ Ð¡Ð’Ð•Ð¢!Â»",
        author: "â€“ Koshkinbaev Atabek",
        contactTitle: "ðŸ“¬ Ð•ÑÑ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹?",
        founder: "ÐžÑÐ½Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° & Frontend Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº",
        founderName: "Koshkinbaev Atabek",
        tech: "Backend Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº & Ð¢ÐµÑ…. ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚",
        techName: "Oâ€˜tebaev Abdirasul",
        rights: "Ð’ÑÐµ Ð¿Ñ€Ð°Ð²Ð° Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ñ‹.",
        themeDay: "Ð”ÐµÐ½ÑŒ",
        themeNight: "ÐÐ¾Ñ‡ÑŒ",
        searchPlaceholder: "ÐŸÐ¾Ð¸ÑÐº ÑÐ»Ð¾Ð²Ð° (Ð´ÐµÐ¼Ð¾)...",
        toastSaved: "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ âœ…",
        aiBtn: "AI ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº",
        aiTitle: "Gemini AI â€” Ð’Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹",
        aiHint: "ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾Ñ. AI Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚.",
        aiPlaceholder: "ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: 'Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Ð¸Ð¼Ð¸Ð´Ð¶?'",
        aiSend: "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ",
        aiClear: "ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ñ‡Ð°Ñ‚",
        aiThinking: "Ð”ÑƒÐ¼Ð°ÑŽ...",
        aiErr: "ÐžÑˆÐ¸Ð±ÐºÐ°. Ð¡ÐµÑ€Ð²ÐµÑ€ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½? (server.js Ð¿Ð¾Ñ€Ñ‚ 3000)"
      },
    };

    const cx = (...classes) => classes.filter(Boolean).join(" ");

    function applyTheme(theme) {
      const root = document.documentElement;
      if (theme === "dark") root.classList.add("dark");
      else root.classList.remove("dark");
      document.body.className = cx(
        "min-h-screen",
        theme === "dark" ? "bg-slate-950 text-slate-100" : "bg-slate-50 text-slate-800"
      );
    }

    function Toast({ show, text }) {
      return (
        <div className={cx(
          "fixed bottom-5 left-1/2 -translate-x-1/2 z-[9999]",
          "px-4 py-2 rounded-xl shadow-lg backdrop-blur",
          "border text-sm",
          show ? "opacity-100 translate-y-0" : "opacity-0 translate-y-2 pointer-events-none",
          "bg-white/80 border-slate-200 text-slate-800",
          "dark:bg-slate-900/70 dark:border-slate-700 dark:text-slate-100"
        )}>
          {text}
        </div>
      );
    }

    function ChatModal({ open, onClose, t, lang }) {
      const [input, setInput] = useState("");
      const [loading, setLoading] = useState(false);
      const [err, setErr] = useState("");
      const listRef = useRef(null);

      const [messages, setMessages] = useState(() => {
        try {
          const raw = localStorage.getItem(STORAGE_KEYS.chat);
          const parsed = raw ? JSON.parse(raw) : {};
          return parsed?.[lang] || [
            { role: "ai", text: t.aiHint }
          ];
        } catch {
          return [{ role: "ai", text: t.aiHint }];
        }
      });

      useEffect(() => {
        // saqlash
        const raw = localStorage.getItem(STORAGE_KEYS.chat);
        const parsed = raw ? JSON.parse(raw) : {};
        parsed[lang] = messages;
        localStorage.setItem(STORAGE_KEYS.chat, JSON.stringify(parsed));
      }, [messages, lang]);

      useEffect(() => {
        // scroll pastga
        if (listRef.current) {
          listRef.current.scrollTop = listRef.current.scrollHeight;
        }
      }, [messages, loading]);

      async function send() {
        const text = input.trim();
        if (!text || loading) return;

        setErr("");
        setInput("");
        const next = [...messages, { role: "user", text }];
        setMessages(next);
        setLoading(true);

        try {
          const r = await fetch("http://localhost:3000/api/gemini", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              message: text,
              lang,
              // kontekst: sayt haqida qisqacha
              context: "Bu sayt Qaraqalpaq_sÃ³zlik: so'zlar izohi, misollar va audio talaffuz."
            })
          });

          const data = await r.json();
          if (!r.ok) throw new Error(data?.error || "Request failed");

          setMessages(prev => [...prev, { role: "ai", text: data.text }]);
        } catch (e) {
          setErr(t.aiErr);
        } finally {
          setLoading(false);
        }
      }

      function onKeyDown(e) {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          send();
        }
      }

      function clearChat() {
        const base = [{ role: "ai", text: t.aiHint }];
        setMessages(base);
      }

      if (!open) return null;

      return (
        <div className="fixed inset-0 z-[9998]">
          <div className="absolute inset-0 bg-black/50" onClick={onClose}></div>
          <div className="absolute inset-x-0 bottom-0 md:inset-0 md:flex md:items-center md:justify-center p-3">
            <div className="w-full md:max-w-2xl bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-3xl shadow-2xl overflow-hidden">
              <div className="flex items-center justify-between px-5 py-4 border-b border-slate-200 dark:border-slate-800">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-2xl bg-blue-600/10 dark:bg-blue-500/15 flex items-center justify-center">
                    <i className="fa-solid fa-wand-magic-sparkles text-blue-700 dark:text-blue-300"></i>
                  </div>
                  <div>
                    <div className="font-extrabold text-slate-900 dark:text-white">{t.aiTitle}</div>
                    <div className="text-xs text-slate-500 dark:text-slate-300">API: server.js â†’ /api/gemini</div>
                  </div>
                </div>
                <div className="flex items-center gap-2">
                  <button
                    onClick={clearChat}
                    className="px-3 py-2 rounded-xl text-sm font-bold border border-slate-200 dark:border-slate-800 hover:shadow"
                    type="button"
                  >
                    <i className="fa-solid fa-broom mr-2"></i>{t.aiClear}
                  </button>
                  <button
                    onClick={onClose}
                    className="w-11 h-11 rounded-xl border border-slate-200 dark:border-slate-800 hover:shadow"
                    type="button"
                    aria-label="close"
                  >
                    <i className="fa-solid fa-xmark"></i>
                  </button>
                </div>
              </div>

              <div ref={listRef} className="h-[55vh] md:h-[420px] overflow-auto px-5 py-4 space-y-3">
                {messages.map((m, idx) => (
                  <div key={idx} className={cx("flex", m.role === "user" ? "justify-end" : "justify-start")}>
                    <div className={cx(
                      "max-w-[85%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap",
                      m.role === "user"
                        ? "bg-blue-600 text-white"
                        : "bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800"
                    )}>
                      {m.text}
                    </div>
                  </div>
                ))}

                {loading && (
                  <div className="flex justify-start">
                    <div className="max-w-[85%] rounded-2xl px-4 py-3 text-sm bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-800">
                      <i className="fa-solid fa-spinner fa-spin mr-2"></i>{t.aiThinking}
                    </div>
                  </div>
                )}

                {err && (
                  <div className="rounded-2xl px-4 py-3 text-sm bg-red-50 dark:bg-red-950/40 border border-red-200 dark:border-red-900 text-red-700 dark:text-red-200">
                    <i className="fa-solid fa-triangle-exclamation mr-2"></i>{err}
                  </div>
                )}
              </div>

              <div className="px-5 py-4 border-t border-slate-200 dark:border-slate-800">
                <div className="flex gap-2">
                  <textarea
                    className="w-full resize-none h-12 md:h-14 rounded-2xl px-4 py-3 border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 outline-none"
                    placeholder={t.aiPlaceholder}
                    value={input}
                    onChange={(e) => setInput(e.target.value)}
                    onKeyDown={onKeyDown}
                  />
                  <button
                    onClick={send}
                    disabled={loading}
                    className={cx(
                      "px-5 rounded-2xl font-extrabold",
                      "bg-blue-600 text-white hover:bg-blue-700 active:scale-[0.99]",
                      loading ? "opacity-70 cursor-not-allowed" : ""
                    )}
                    type="button"
                  >
                    <i className="fa-solid fa-paper-plane mr-2"></i>{t.aiSend}
                  </button>
                </div>
                <div className="mt-2 text-xs text-slate-500 dark:text-slate-300">
                  Enter â€” yuborish, Shift+Enter â€” yangi qator
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    function App() {
      const [theme, setTheme] = useState(() => localStorage.getItem("qs_theme") || "light");
      const [lang, setLang] = useState(() => localStorage.getItem("qs_lang") || "kaa");
      const [menuOpen, setMenuOpen] = useState(false);
      const [toast, setToast] = useState(false);
      const [chatOpen, setChatOpen] = useState(false);

      const t = useMemo(() => i18n[lang] || i18n.kaa, [lang]);

      useEffect(() => { applyTheme(theme); localStorage.setItem("qs_theme", theme); }, [theme]);
      useEffect(() => { localStorage.setItem("qs_lang", lang); }, [lang]);

      function showToast() {
        setToast(true);
        window.clearTimeout(window.__qs_toast);
        window.__qs_toast = window.setTimeout(() => setToast(false), 1600);
      }
      function handleThemeToggle() { setTheme(p => (p === "dark" ? "light" : "dark")); showToast(); }
      function handleLangChange(code) { setLang(code); showToast(); }

      const nav = [
        { label: t.navNews, href: "janaliq.html" },
        { label: t.navFeedback, href: "fikir1.html" },
        { label: t.navRegister, href: "baylanÄ±s.html" },
        { label: t.navTeam, href: "komanda.html" },
      ];

      return (
        <div className="min-h-screen">
          <Toast show={toast} text={t.toastSaved} />
          <ChatModal open={chatOpen} onClose={() => setChatOpen(false)} t={t} lang={lang} />

          {/* HERO */}
          <header className="relative overflow-hidden"
            style={{ backgroundImage: "url('naÇµÄ±s.jpg')", backgroundSize: "cover", backgroundPosition: "center" }}>
            <div className="absolute inset-0 bg-gradient-to-r from-black/70 via-black/40 to-black/70"></div>

            <div className="relative max-w-6xl mx-auto px-6 py-16 md:py-20">
              <div className="flex flex-col gap-6">
                <h1 className="text-3xl md:text-5xl font-extrabold tracking-tight text-white drop-shadow">
                  {t.heroTitle}
                </h1>
                <p className="text-white/90 max-w-2xl text-base md:text-lg">{t.heroSubtitle}</p>

                <div className="mt-2 max-w-xl">
                  <div className="flex items-center gap-2 bg-white/95 dark:bg-slate-900/70 rounded-2xl p-2 border border-white/30 dark:border-slate-700 backdrop-blur shadow-lg">
                    <span className="px-2 text-slate-600 dark:text-slate-200">
                      <i className="fa-solid fa-magnifying-glass"></i>
                    </span>
                    <input
                      className="w-full bg-transparent outline-none text-slate-800 dark:text-slate-100 placeholder:text-slate-500 dark:placeholder:text-slate-300"
                      placeholder={t.searchPlaceholder}
                      onChange={() => {}}
                    />
                    <button
                      className="px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 active:scale-[0.98]"
                      onClick={() => window.location.href = "izlew.html"}
                      type="button"
                    >
                      OK
                    </button>
                  </div>
                </div>

                <div className="flex flex-wrap items-center gap-3 mt-2">
                  <button
                    className="inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-white hover:bg-white/20 backdrop-blur"
                    onClick={handleThemeToggle}
                    type="button"
                  >
                    <i className={theme === "dark" ? "fa-solid fa-moon" : "fa-solid fa-sun"}></i>
                    <span className="font-semibold">{theme === "dark" ? t.themeNight : t.themeDay}</span>
                  </button>

                  <div className="flex items-center gap-2 px-3 py-2 rounded-xl border border-white/30 bg-white/10 backdrop-blur">
                    <i className="fa-solid fa-language text-white"></i>
                    <div className="flex gap-2">
                      {LANGS.map(l => (
                        <button key={l.code} onClick={() => handleLangChange(l.code)}
                          className={cx("px-3 py-1 rounded-lg text-sm font-semibold hover:bg-white/20",
                          lang === l.code ? "bg-white/25 text-white" : "text-white/90")}
                          type="button">
                          {l.label}
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* AI Button */}
                  <button
                    className="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 shadow-lg"
                    onClick={() => setChatOpen(true)}
                    type="button"
                  >
                    <i className="fa-solid fa-robot"></i>
                    <span className="font-extrabold">{t.aiBtn}</span>
                  </button>
                </div>
              </div>
            </div>
          </header>

          {/* NAVBAR */}
          <nav className="sticky top-0 z-50 border-b border-slate-200/70 dark:border-slate-800 bg-white/80 dark:bg-slate-950/70 backdrop-blur">
            <div className="max-w-6xl mx-auto px-6 py-3 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <img src="pon21.png" alt="Logo" className="h-10 w-10 rounded-xl object-cover shadow" />
                <div className="leading-tight">
                  <div className="text-lg md:text-xl font-extrabold text-slate-900 dark:text-white">{t.brand}</div>
                  <div className="text-xs text-slate-500 dark:text-slate-300">{t.quickTitle}</div>
                </div>
              </div>

              <ul className="hidden md:flex items-center gap-6">
                {nav.map(item => (
                  <li key={item.href}>
                    <a href={item.href} className="text-sm font-semibold text-slate-700 hover:text-blue-700 dark:text-slate-200 dark:hover:text-blue-300">
                      {item.label}
                    </a>
                  </li>
                ))}
              </ul>

              <div className="flex items-center gap-3">
                <button
                  onClick={() => setChatOpen(true)}
                  className="hidden md:inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700"
                  type="button"
                >
                  <i className="fa-solid fa-robot"></i>{t.aiBtn}
                </button>

                <button
                  onClick={handleThemeToggle}
                  className="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 hover:shadow"
                  type="button"
                >
                  <i className={cx("fa-solid", theme === "dark" ? "fa-moon" : "fa-sun")}></i>
                  <span className="text-sm font-semibold">{theme === "dark" ? t.themeNight : t.themeDay}</span>
                </button>

                <div className="hidden sm:flex items-center gap-2">
                  {LANGS.map(l => (
                    <button key={l.code} onClick={() => handleLangChange(l.code)}
                      className={cx("px-3 py-2 rounded-xl text-sm font-bold border",
                        lang === l.code ? "border-blue-600 bg-blue-600 text-white" : "border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-200 hover:shadow")}
                      type="button">
                      {l.code.toUpperCase()}
                    </button>
                  ))}
                </div>

                <button
                  onClick={() => setMenuOpen(v => !v)}
                  className="md:hidden inline-flex items-center justify-center w-11 h-11 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900"
                  type="button"
                >
                  <i className={cx("fa-solid", menuOpen ? "fa-xmark" : "fa-bars")}></i>
                </button>
              </div>
            </div>

            <div className={cx("md:hidden", menuOpen ? "block" : "hidden")}>
              <div className="max-w-6xl mx-auto px-6 pb-4">
                <div className="rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm">
                  <div className="grid gap-2">
                    {nav.map(item => (
                      <a key={item.href} href={item.href}
                        className="px-4 py-3 rounded-xl font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800">
                        {item.label}
                      </a>
                    ))}
                    <button
                      onClick={() => setChatOpen(true)}
                      className="px-4 py-3 rounded-xl font-extrabold bg-blue-600 text-white hover:bg-blue-700"
                      type="button"
                    >
                      <i className="fa-solid fa-robot mr-2"></i>{t.aiBtn}
                    </button>
                  </div>

                  <div className="mt-4 flex flex-wrap items-center gap-2">
                    <button onClick={handleThemeToggle}
                      className="px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 hover:shadow font-semibold"
                      type="button">
                      <i className={cx("fa-solid mr-2", theme === "dark" ? "fa-moon" : "fa-sun")}></i>
                      {theme === "dark" ? t.themeNight : t.themeDay}
                    </button>

                    {LANGS.map(l => (
                      <button key={l.code} onClick={() => handleLangChange(l.code)}
                        className={cx("px-4 py-2 rounded-xl border font-semibold",
                          lang === l.code ? "border-blue-600 bg-blue-600 text-white" : "border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950")}
                        type="button">
                        {l.label}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </nav>

          {/* MAIN */}
          <main className="max-w-6xl mx-auto px-6 py-12">
            <h2 className="text-2xl md:text-3xl font-extrabold text-slate-900 dark:text-white mb-8">{t.quickTitle}</h2>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <a href="izlew.html"
                 className="group rounded-3xl p-6 border shadow-sm bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:shadow-xl hover:-translate-y-1">
                <div className="flex items-start justify-between gap-4">
                  <div>
                    <h3 className="text-xl font-extrabold text-blue-700 dark:text-blue-300">{t.cardDictTitle}</h3>
                    <p className="mt-2 text-slate-600 dark:text-slate-300 text-sm leading-relaxed">{t.cardDictDesc}</p>
                  </div>
                  <div className="w-12 h-12 rounded-2xl bg-blue-600/10 dark:bg-blue-500/15 flex items-center justify-center">
                    <i className="fa-solid fa-book text-blue-700 dark:text-blue-300"></i>
                  </div>
                </div>
                <div className="mt-5 inline-flex items-center gap-2 text-sm font-bold text-blue-700 dark:text-blue-300">
                  {t.cardOpen}<i className="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                </div>
              </a>

              <a href="qosiq.html"
                 className="group rounded-3xl p-6 border shadow-sm bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:shadow-xl hover:-translate-y-1">
                <div className="flex items-start justify-between gap-4">
                  <div>
                    <h3 className="text-xl font-extrabold text-blue-700 dark:text-blue-300">{t.cardAudioTitle}</h3>
                    <p className="mt-2 text-slate-600 dark:text-slate-300 text-sm leading-relaxed">{t.cardAudioDesc}</p>
                  </div>
                  <div className="w-12 h-12 rounded-2xl bg-blue-600/10 dark:bg-blue-500/15 flex items-center justify-center">
                    <i className="fa-solid fa-volume-high text-blue-700 dark:text-blue-300"></i>
                  </div>
                </div>
                <div className="mt-5 inline-flex items-center gap-2 text-sm font-bold text-blue-700 dark:text-blue-300">
                  {t.cardOpen}<i className="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                </div>
              </a>
            </div>

            <section className="mt-14">
              <div className="flex items-center justify-between gap-4 mb-5">
                <h3 className="text-xl font-extrabold text-slate-900 dark:text-white">{t.socialTitle}</h3>
                <div className="text-sm text-slate-500 dark:text-slate-300">
                  <i className="fa-solid fa-bolt mr-2"></i>Interaktiv havolalar
                </div>
              </div>

              <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                {[
                  { href: "https://t.me/atabek_offical01", icon: "fa-telegram", label: "Telegram" },
                  { href: "https://instagram.com/atabekkoshkinbaev", icon: "fa-instagram", label: "Instagram" },
                  { href: "https://facebook.com/share/15FSXUZmzg/", icon: "fa-facebook", label: "Facebook" },
                  { href: "https://youtube.com/@karsu_news", icon: "fa-youtube", label: "YouTube" },
                ].map(s => (
                  <a key={s.label} href={s.href} target="_blank" rel="noreferrer"
                     className="rounded-3xl p-5 border bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:shadow-xl hover:-translate-y-1 flex flex-col items-center justify-center gap-2">
                    <div className="w-12 h-12 rounded-2xl bg-blue-600/10 dark:bg-blue-500/15 flex items-center justify-center">
                      <i className={cx("fa-brands", s.icon, "text-2xl text-blue-700 dark:text-blue-300")}></i>
                    </div>
                    <div className="font-bold text-slate-700 dark:text-slate-200">{s.label}</div>
                  </a>
                ))}
              </div>
            </section>
          </main>

          <footer className="border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950">
            <div className="max-w-6xl mx-auto px-6 py-12 grid grid-cols-1 md:grid-cols-3 gap-8">
              <div className="space-y-4">
                <h4 className="text-lg font-extrabold text-slate-900 dark:text-white">{t.aboutTitle}</h4>
                <p className="text-sm leading-relaxed text-slate-600 dark:text-slate-300">{t.aboutText}</p>
                <img src="t1.jfif" alt="Profile" className="w-40 h-40 object-cover rounded-full border-4 border-slate-200 dark:border-slate-800 shadow" />
              </div>

              <div className="space-y-4">
                <h4 className="text-lg font-extrabold text-slate-900 dark:text-white">{t.rememberTitle}</h4>
                <div className="space-y-2 text-sm text-slate-700 dark:text-slate-200">
                  <div className="p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800">{t.q1}</div>
                  <div className="p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800">{t.q2}</div>
                  <div className="p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800">{t.q3}</div>
                  <div className="font-bold text-slate-500 dark:text-slate-300">{t.author}</div>
                </div>
              </div>

              <div className="space-y-4">
                <h4 className="text-lg font-extrabold text-slate-900 dark:text-white">{t.contactTitle}</h4>
                <div className="rounded-3xl p-5 border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900">
                  <div className="text-sm font-bold text-slate-700 dark:text-slate-200">{t.founder}</div>
                  <div className="text-sm text-slate-600 dark:text-slate-300 mt-1">{t.founderName}</div>
                  <div className="mt-2 text-sm font-bold text-blue-700 dark:text-blue-300">+998 93 047 97 44</div>
                </div>

                <div className="rounded-3xl p-5 border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900">
                  <div className="text-sm font-bold text-slate-700 dark:text-slate-200">{t.tech}</div>
                  <div className="text-sm text-slate-600 dark:text-slate-300 mt-1">{t.techName}</div>
                  <div className="mt-2 text-sm font-bold text-blue-700 dark:text-blue-300">+998 99 131 76 11</div>
                </div>
              </div>
            </div>

            <div className="text-center text-xs text-slate-500 dark:text-slate-400 py-6 border-t border-slate-200 dark:border-slate-800">
              Â© 2025 Qaraqalpaq_sÃ³zlik. {t.rights}
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
